From f5fdef18402bbcd9cf48d25c4d4baeaefaa46af6 Mon Sep 17 00:00:00 2001
From: Tharyrok <dev@tharyrok.eu>
Date: Thu, 1 Oct 2020 09:51:42 +0200
Subject: [PATCH] Putting in place the quick fix that comes from ticket #44

Letsencrypt refuses non-authenticated GET requests.
---
 acmebot | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/acmebot b/acmebot
index f2ad501..107b4a7 100755
--- a/acmebot
+++ b/acmebot
@@ -2201,7 +2201,7 @@ class AcmeManager(object):
                 authorizations = []
                 for url in body.authorizations:
                     try:
-                        authorizations.append(self.acme_client.client._authzr_from_response(self.acme_client.client.net.get(url), uri=url))
+                        authorizations.append(self.acme_client.client._authzr_from_response(self.acme_client.client._post_as_get(url), uri=url))
                     except Exception as error:
                         self._error('Unable to request authorization for ', domain_name, '\n', self._indent(error), '\n')
                         continue
@@ -2263,7 +2263,7 @@ class AcmeManager(object):
         return key_options
 
     def _poll_order(self, order):
-        response = self.acme_client.net.get(order.uri)
+        response = self.acme_client._post_as_get(order.uri)
         body = messages.Order.from_json(response.json())
         if body.error is not None:
             raise body.error
